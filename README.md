# Задание
В любой реляционной базе данных должна быть таблица currency c колонками:
id — первичный ключ
name — название валюты
rate — курс валюты к рублю

Должна быть консольная команда для обновления данных в таблице currency. Данные по курсам валют можно взять отсюда: http://www.cbr.ru/scripts/XML_daily.asp

Реализовать 2 REST API метода:
GET /api/currency — должен возвращать список курсов валют с возможность пагинации
GET /api/currency/{id} — должен возвращать курс валюты для переданного id

В API должна быть реализована авторизация

Slimframework/native php

___

## Реализация

Написал на php без фреймворков.

### Роутинг
Сделал с помощью **.htaccess** переадресацию всех запросов, падающих в **./api/** на **index.php**.

### Создание/обновление таблицы курсов валют
Запускается из консоли: **php updateCurrency.php**

Скачивает курлом данные валют, заем создаёт таблицу currency для данных (если её нет), очищает её (если есть) и заполняет подготовленными данными. Такая схема позволяет обойтись без файла миграции или ручного создания таблицы.

### REST API методы
**GET /api/currency** — забрать все данные валют из таблицы.

**GET /api/currency/{id}** — забрать только обменный курс указанной валюты (передаётся её id в таблице).

### Пагинация
Сделана через GET-параметры запроса: **?per_page=x&page=y**, где **per_page** - количество валют на странице, а **page** - номер страницы. Параметры могут идти в любой последовательности. Если передан только параметр **per_page**, то выводится указанное количество валют. 

### Авторизация
Сделал BASIC авторизацию через **.htaccess** и файл паролей **.htpasswd**.

Login: user1

Password: user1

## Установка
- Создать базу данных MySQL.
- Изменить данные для коннекта к БД (хранятся в **Api.php**)
- !Делал на локальном сервере XAMPP, поэтому при анализе Uri (для роутинга) исходил из его структуры каталогов. Если структура другая - поправить разбор в run().